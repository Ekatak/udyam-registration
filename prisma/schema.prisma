generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Registration {
  id          Int      @id @default(autoincrement())
  aadhaar     String   @unique
  aadhaarName String
  pan         String   @unique
  panName     String
  createdAt   DateTime @default(now())
}


USE udyam_registration;

DROP TABLE IF EXISTS otps;
DROP TABLE IF EXISTS pan_details1;
DROP TABLE IF EXISTS aadhaar_details1;

CREATE TABLE otps (
    id INT AUTO_INCREMENT PRIMARY KEY,
    aadhaar VARCHAR(12) NOT NULL,
    mobile VARCHAR(10) NOT NULL UNIQUE,
    otp VARCHAR(6) NOT NULL,
    expires_at DATETIME NOT NULL
);

CREATE TABLE aadhaar_details1 (
    id INT AUTO_INCREMENT PRIMARY KEY,
    aadhaar VARCHAR(12) NOT NULL UNIQUE,
    mobile VARCHAR(10) NOT NULL UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE pan_details1 (
    id INT AUTO_INCREMENT PRIMARY KEY,
    aadhaar VARCHAR(12) NOT NULL,
    pan VARCHAR(10) NOT NULL UNIQUE,
    pan_name VARCHAR(100) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (aadhaar) REFERENCES aadhaar_details1(aadhaar)
        ON DELETE CASCADE
        ON UPDATE CASCADE
);
